/*******************************************************************************
 * Controls
 *
 * Menu toggle buttons and control row styling.
 * Uses Build Canada design system colors.
 ******************************************************************************/

$light-stroke: $gray-20;
$dark-stroke: $charcoal;
$active-stroke: $cerulean-500;

$light-fill: $white;
$active-fill: $cerulean-100;
$hover-fill: $gray-10;
$selected-fill: $cerulean-200;

$active-switch: $cerulean-500;

$medium: 400;
$bold: 700;
$lato: $sans-serif-font-stack;

$indent: 15px;
$control-row-height: 32px;

// Buttons in the main controls row of the grapher view
nav.controlsRow .controls {
    display: flex;
    justify-content: flex-end;
    gap: 8px;

    button.menu-toggle {
        font: $medium 13px/16px $lato;
        letter-spacing: 0.02em;
        display: flex;
        align-items: center;
        border: 1px solid $light-stroke;
        border-radius: 0;
        padding: 7px 12px;
        color: $charcoal;
        white-space: nowrap;
        background-color: $white;
        transition: all 150ms ease;

        &:hover {
            background: $hover-fill;
            cursor: pointer;
        }

        &.active,
        &:active {
            color: $cerulean-900;
            background: $active-fill;
            border-color: $active-stroke;
        }

        &:focus-visible {
            outline: 2px solid $auburn;
            outline-offset: 2px;
        }

        svg {
            height: 12px;
            margin-right: 6px;
            vertical-align: bottom;
        }

        label:hover {
            cursor: pointer;
        }
    }
}

/*******************************************************************************
 * Responsive Label Hiding
 *
 * Make buttons narrower by omitting their text labels as the viewport
 * gets narrower.
 ******************************************************************************/

@at-root {
    // Collapse both settings and entity selector labels at semi-narrow breakpoint
    .GrapherComponentSemiNarrow {
        nav.controlsRow .settings-menu button.menu-toggle {
            min-height: $control-row-height;
            svg {
                margin: 0 2px;
            }
            .label {
                display: none;
            }
        }
        nav.controlsRow .entity-selection-menu button.menu-toggle {
            label span {
                display: none;
            }
        }
    }
}

@container grapher (max-width: 575px) {
    // Collapse Settings toggle to just an icon on small screens
    nav.controlsRow .settings-menu button.menu-toggle {
        min-height: $control-row-height;
        svg {
            margin: 0 2px;
        }
        .label {
            display: none;
        }
    }

    // Undo the .GrapherComponentSemiNarrow hiding until next container query
    nav.controlsRow .entity-selection-menu button.menu-toggle {
        label span {
            display: inline;
        }
    }
}

@container grapher (max-width: 675px) {
    // Hide entity name in Edit/Select/Switch button (chart controls)
    nav.controlsRow .chart-controls .entity-selection-menu button.menu-toggle {
        label span {
            display: none;
        }
    }
}

@container grapher (max-width: 725px) {
    // Hide entity name in Edit/Select/Switch button (map controls)
    nav.controlsRow .map-controls .entity-selection-menu button.menu-toggle {
        label span {
            display: none;
        }
    }
}

@container grapher (max-width: 500px) {
    // Hide labels on smaller screens
    .ContentSwitchers .Tabs__Tab .label {
        display: none;
    }
}

// Reduce horizontal padding of content switcher tab based on grapher's size
@container grapher (max-width: 725px) {
    .ContentSwitchers .Tabs__Tab {
        --tab-padding: 12px;
    }
}

@container grapher (max-width: 335px) {
    .ContentSwitchers .Tabs__Tab {
        --tab-padding: 8px;
    }
}

/*******************************************************************************
 * Admin Style Corrections
 ******************************************************************************/

@at-root {
    .AdminApp {
        nav.controlsRow .controls button.menu-toggle label {
            margin: 0;
        }
        .GrapherSettingsPopover section {
            background: none;
        }
    }
}
